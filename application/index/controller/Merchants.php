<?php

namespace app\index\controller;

use app\common\controller\Frontend;

class Merchants extends Frontend
{
    protected $noNeedLogin = '*';
    protected $noNeedRight = '*';
    protected $layout = '';

    // 招商加盟
    public function index()
    {
        $image = getImage('images, link', 4, 1);

        $subMenu = getArticleCategoryDetail('link', '/'.$this->request->pathinfo(), 'id, article_category_name, top_title, top_info, top_image');

        $childMenuList = getArticleCategoryList('parent_id', $subMenu['id'], 'id, article_category_name', 3);

        $articleList_1 = getArticleList('article_category_id', $childMenuList[0]['id'], 'id, image, info', 3);

        $articleList_2 = getArticleList('article_category_id', $childMenuList[1]['id'], 'title, content', 1);

        $articleList_3 = getArticleList('article_category_id', $childMenuList[2]['id'], 'title, content', 1);

        $this->assign('image', $image);
        $this->assign('subMenu', $subMenu);
        $this->assign('sign', 'merchants');
        $this->assign('childMenuList', $childMenuList);
        $this->assign('articleList_1', $articleList_1);
        $this->assign('articleList_2', $articleList_2);
        $this->assign('articleList_3', $articleList_3);
        return $this->view->fetch();
    }

    // 招商加盟-项目优势-文章详情
    public function youshi($id=0)
    {
        $image = getImage('images, link', 4, 1);

        // 文章详情
        $articleDetail = getArticleDetail('id', $id, 'article_category_id, title, content');
        $subMenu = getArticleCategoryDetail('id', $articleDetail['article_category_id'], 'article_category_name');

        $this->assign('image', $image);
        $this->assign('sign', 'merchants');
        $this->assign('articleDetail', $articleDetail);
        $this->assign('subMenu', $subMenu);
        return $this->view->fetch();
    }
}