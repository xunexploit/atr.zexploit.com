<?php

/**
 * 获取图片
 * @param $field 字段
 * @param $type 类型
 * @param $limit 数量
 * @return mixed
 */
function getImage($field,$type,$limit=10)
{
    if($limit<=1){
        return db('images')
            ->where('article_category_id', '=', $type)
            ->field($field)
            ->order('weigh desc, id desc')
            ->limit($limit)
            ->find();
    }else{
        return db('images')
            ->where('article_category_id', '=', $type)
            ->field($field)
            ->order('weigh desc, id desc')
            ->limit($limit)
            ->select();
    }
}

/**
 * 模块详情
 * @param $searchKey 搜索字段
 * @param $value 字段值
 * @param $field 查询的字段
 * @return mixed
 */
function getArticleCategoryDetail($searchKey, $value, $field)
{
    return db('article_category')
        ->where($searchKey, '=', $value)
        ->field($field)
        ->find();
}

/**
 * 模块列表
 * @param $searchKey 搜索字段
 * @param $value 字段值
 * @param $field 查询的字段
 * @param $limit 查询记录条数
 * @return mixed
 */
function getArticleCategoryList($searchKey, $value, $field, $limit=10)
{
    return db('article_category')
        ->where($searchKey, '=', $value)
        ->field($field)
        ->limit($limit)
        ->select();
}

/**
 * 文章详情
 * @param $searchKey 搜索字段
 * @param $value 字段值
 * @param $field 查询的字段
 * @return mixed
 */
function getArticleDetail($searchKey, $value, $field)
{
    return db('article')
        ->where($searchKey, '=', $value)
        ->field($field)
        ->find();
}

/**
 * 文章列表
 * @param $searchKey 搜索字段
 * @param $value 字段值
 * @param $field 查询的字段
 * @param $limit 查询记录条数
 * @return mixed
 */
function getArticleList($searchKey, $value, $field, $limit=10)
{
    return db('article')
        ->where($searchKey, '=', $value)
        ->field($field)
        ->limit($limit)
        ->select();
}

/**
 * 商品详情
 * @param $searchKey 搜索字段
 * @param $value 字段值
 * @param $field 查询的字段
 * @return mixed
 */
function getProductDetail($searchKey, $value, $field)
{
    return db('goods')
        ->where($searchKey, '=', $value)
        ->field($field)
        ->find();
}